---

testfoo: 'testbar'
execpath: '/usr/lib64/qt-3.3/bin:/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/opt/puppetlabs/bin:/root/bin:/opt/puppet/bin'

modparams:
  base_comment_puppetmanaged: '# This file is managed by UCM in the Base data module on Bitbucket.'

  # Template Params passed to ntp.conf 
  ntpconf_driftfile: 'driftfile /var/lib/ntp/drift'
  ntpconf_ntp1: "server ntp-%{building}-%{orientation}-1.%{ntpdomain}"
  ntpconf_ntp2: "server ntp-%{building}-%{orientation}-2.%{ntpdomain}"
  ntpconf_ntp3: "server ntp-%{building}-%{orientation}-3.%{ntpdomain}"
  ntpconf_comment_interogate: '# Local users may interrogate the ntp server more closely.'
  ntpconf_restrict_items: 'restrict default kod nomodify notrap nopeer noquery'
  ntpconf_restrict_loop1: 'restrict 127.0.0.1' 

# this stanza is a special diff type.  it concatenates all kernel param settings in all 
# sysctl.d/* & sysctl.conf and compares it against the provided template below.
base::sysctl::files:
  '/etc/sysctl.d/sysctl.conf':
    template: 'base/sysctl/sysctl.conf.epp'

base::directories:
  '/root/.ssh':
    mode: '0600'

base::files:
# Clean up
  '/etc/sysctl.d/base.conf':
    ensure: 'absent'
    readonly: 'false'

base::groups:
  'users':
    ensure: 'present'
    gid: '103'

base::packages:
  'ITM6base':
    state: 'installed'
  'tda-capmgt-bpa':
    state: 'installed'
  'BESAgent':
    state: 'installed'
  'ksh':
    state: 'installed'
  'logwatch':
    state: 'installed'
  'CentrifyDC':
    state: 'installed'

base::services:
  'ntpd':
    state: 'running'
  'sshd':
    state: 'running'

base::filediff:
  '/etc/ntp.conf':
    template: 'base/ntp/ntp.conf.epp'
  '/etc/centrifydc/centrifydc.conf':
    template: 'base/centrifydc/centrifydc.conf.epp'
  '/usr/local/bin/puppet-adjoin':
    template: 'base/centrifydc/puppet-adjoin.epp'
  '/etc/kdump.conf':
    template: 'base/kdump/kdump.conf.epp'
  '/etc/sysconfig/kdump':
    template: 'base/kdump/kdump.epp'
  '/root/.ssh/authorized_keys':
    template: 'base/ssh/authkey.epp'
  '/etc/ssh/sshd_config':
    template: 'base/ssh/sshd_config.epp'
  '/etc/ssh/ssh_config':
    template: 'base/ssh/ssh_config.epp'
  '/etc/sudoers.d/base_sudo':
    template: 'base/tda/base_sudoers.epp'
  '/etc/sudoers.d/taddm_sudo':
    template: 'base/tda/taddm_sudo.epp'
  '/etc/crontab':
    template: 'base/tda/crontab.epp'
  '/etc/anacrontab':
    template: 'base/tda/anacrontab.epp'
  '/etc/motd':
    template: 'base/motd/%{building}_%{env}_motd.epp'
  '/etc/profile.d/motd_tda.sh':
    template: 'base/motd/motd_tda.sh.epp'
  '/etc/profile.d/custom.sh':
    template: 'base/tda/custom.sh.epp'
  '/etc/rsyslog.conf':
    template: 'base/rsyslog/conf.epp'
  '/etc/rsyslog.d/arcsight.conf':
    template: 'base/rsyslog/arcsight/%{asscli}-%{building}-%{env}.epp'
  '/etc/rsyslog.d/boot.conf':
    template: 'base/rsyslog/boot.conf.epp'
  '/etc/rsyslog.d/cron.conf':
    template: 'base/rsyslog/cron.conf.epp'
  '/etc/rsyslog.d/mail.conf':
    template: 'base/rsyslog/mail.conf.epp'
  '/etc/rsyslog.d/messages.conf':
    template: 'base/rsyslog/messages.conf.epp'
  '/etc/rsyslog.d/secure.conf':
    template: 'base/rsyslog/secure.conf.epp'
  '/etc/rsyslog.d/spooler.conf':
    template: 'base/rsyslog/spooler.conf.epp'
  '/etc/security/access.conf':
    template: 'base/tda/access.conf.epp'
  '/etc/tda-release':
    template: 'base/tda/tda-release.epp'
  '/etc/issue':
    template: 'base/tda/issue.epp'
  '/etc/issue.net':
    template: 'base/tda/issue.net.epp'
  '/etc/default/useradd':
    template: 'base/tda/useradd.epp'
  '/etc/login.defs':
    template: 'base/tda/login.defs.epp'
  '/etc/yum/pluginconf.d/subscription-manager.conf':
    template: 'base/tda/subscription-manager.conf.epp'
  '/etc/netconfig':
    template: 'base/tda/netconfig.epp'
  '/root/.bash_profile':
    template: 'base/tda/bash_profile.epp'

# #############################################################################
# Defaults section.  Replace values below with real ones when ready to use.
# #############################################################################
base::users:
  'ucmnulluser':
    ensure: 'absent'

base::commands:
  'ucmdef_cmd':
    command: 'test -d /tmp'

legacy::precommands:
  'test -d /tmp/null':
    unless: 'test -d /var'

legacy::commands:
  'test -d /tmp':
    unless: 'test -d /var'

