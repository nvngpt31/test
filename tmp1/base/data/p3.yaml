---
# NOTES:
#   About the "facts" Class:
#     - We're not including anything facter in this yaml file.
#     - The creation of facts.d and the tdaenv.txt from /etc/tda/env are done in the build.
#   About the "postfix" Class:
#     - That is still pending being added to this yaml file.
#   About the "tdarepo" Class:
#     - We're leaving the tda repo class in place for legacy support of rhscl repo creation
#   About the "tdavmtools" Class:
#     - That is still pending being added to this yaml file.

execpath: '/usr/lib64/qt-3.3/bin:/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/opt/puppetlabs/bin:/root/bin:/opt/puppet/bin'

# Defaults sections, do not remove these or compilation will fail
base::users:
  'fedora':
    ensure: 'absent'
    readonly: false

base::groups:
  'users':
    ensure: 'present'
    gid: '103'
    readonly: false
  'fedora':
    ensure: 'absent'
    readonly: false

base::commands:
  # THIS COMMAND/SCRIPT ONLY RUNS IF THE SERVER IS NOT JOINED TO A ZONE WHICH IS THE CASE WHEN THE SERVER IS FIRST PROVISIONED.
  # THE ZONE IT JOINS IS THE DEFAULT ZONE FOUND IN /ETC/TDA/ENV
  'centrify_adjoin':
    command: '/usr/local/bin/puppet-adjoin'
    readonly: false

base::services:
  'ntpd':
    ensure: 'running'
    subscribe_to: '/etc/ntp.conf'
    readonly: false
  'sshd':
    ensure: 'running'
    subscribe_to: '/etc/ssh/sshd_config'
    readonly: false

base::packages:
  'ITM6base':
    ensure: 'installed'
    readonly: false
  'tda-capmgt-bpa':
    ensure: 'installed'
    readonly: false
  'BESAgent':
    ensure: 'installed'
    readonly: false
  'ksh':
    ensure: 'installed'
    readonly: false
  'logwatch':
    ensure: 'installed'
    readonly: false
  'CentrifyDC':
    ensure: 'installed'
    readonly: false

base::directories:
  '/root/.ssh':
    mode: '0600'
    readonly: false
  '/home/fedora':
    ensure: 'absent'
    readonly: false

base::files:

  # logrotate.conf
  '/etc/logrotate.conf':
    template: 'base/legacy/logrotate/logrotate.conf.erb'
    mode: '0644'
    readonly: false

  # test file
  '/tmp/testfile.txt':
    template: 'base/legacy/test/testfile.erb'
    mode: '0644'
    readonly: false

  # NTP conf
  '/etc/ntp.conf':
    template: 'base/legacy/ntp/ntp.conf.erb'
    readonly: false
  # CENTRIFY
  '/etc/centrifydc/centrifydc.conf':
    template: 'base/legacy/centrifydc/centrifydc.conf.erb'
    readonly: false
  '/etc/centrifydc/centrifydc.conf.condensed':
    template: 'base/legacy/centrifydc/centrifydc.conf.condensed.erb'
    readonly: false
  '/usr/local/bin/puppet-adjoin':
    template: 'base/legacy/centrifydc/puppet-adjoin.erb'
    mode: '0775'
    readonly: false
  # Kdump
  '/etc/kdump.conf':
    template: 'base/legacy/kdump/kdump.conf.erb'
    mode: '0644'
    readonly: false
  '/etc/sysconfig/kdump':
    template: 'base/legacy/kdump/kdump.erb'
    mode: '0644'
    readonly: false
  # SSH
  '/root/.ssh/authorized_keys':
    template: 'base/legacy/ssh/authkey.erb'
    mode: '0644'
    readonly: false
  '/etc/ssh/sshd_config':
    template: 'base/legacy/ssh/sshd_config.erb'
    mode: '0600'
    readonly: false
  '/etc/ssh/ssh_config':
    template: 'base/legacy/ssh/ssh_config.erb'
    mode: '0644'
    readonly: false
  # SUDO FILES
  '/etc/sudoers.d/base_sudo':
    mode: '0440'
    template: 'base/legacy/tda/base_sudoers.erb'
    readonly: false
  '/etc/sudoers.d/taddm_sudo':
    mode: '0440'
    template: 'base/legacy/tda/taddm_sudo.erb'
    readonly: false
  '/etc/sudoers.d/zdeploy_sudo':
    mode: '0440'
    template: 'base/legacy/tda/zdeploy_sudo.erb'
    readonly: false
  # CRON STUFF
  '/etc/crontab':
    mode: '0644'
    template: 'base/legacy/tda/crontab.erb'
    readonly: false
  '/etc/anacrontab':
    template: 'base/legacy/tda/anacrontab.erb'
    mode: '0600'
    readonly: false
  # MOTD
  '/etc/motd':
    template: 'base/legacy/motd/%{building}_%{env}_motd.erb'
    readonly: false
  # PROFILE STUFF
  '/etc/profile.d/motd_tda.sh':
    template: 'base/legacy/motd/motd_tda.sh.erb'
    readonly: false
  '/etc/profile.d/custom.sh':
    template: 'base/legacy/tda/custom.sh.erb'
    mode  : '0644'
    readonly: false
  # SYSLOG
  '/etc/rsyslog.conf':
    template: 'base/legacy/rsyslog/conf.erb'
    readonly: false
  '/etc/rsyslog.d/arcsight.conf':
    template: 'base/legacy/rsyslog/arcsight/%{asscli}-%{building}-%{env}.erb'
    readonly: false
  '/etc/rsyslog.d/boot.conf':
    template: 'base/legacy/rsyslog/boot.conf.erb'
    readonly: false
  '/etc/rsyslog.d/cron.conf':
    template: 'base/legacy/rsyslog/cron.conf.erb'
    readonly: false
  '/etc/rsyslog.d/mail.conf':
    template: 'base/legacy/rsyslog/mail.conf.erb'
    readonly: false
  '/etc/rsyslog.d/messages.conf':
    template: 'base/legacy/rsyslog/messages.conf.erb'
    readonly: false
  '/etc/rsyslog.d/secure.conf':
    template: 'base/legacy/rsyslog/secure.conf.erb'
    readonly: false
  '/etc/rsyslog.d/spooler.conf':
    template: 'base/legacy/rsyslog/spooler.conf.erb'
    readonly: false
  # MISC
  '/etc/rc.d/rc3.d/S99run_puppet':
    ensure: 'absent'
    readonly: false
  '/etc/security/access.conf':
    template: 'base/legacy/tda/access.conf.erb'
    readonly: false
  '/etc/tda-release':
    template: 'base/legacy/tda/tda-release.erb'
    mode: '0644'
    readonly: false
  '/etc/issue':
    template: 'base/legacy/tda/issue.erb'
    mode: '0644'
    readonly: false
  '/etc/issue.net':
    template: 'base/legacy/tda/issue.net.erb'
    mode: '0644'
    readonly: false
  '/etc/default/useradd':
    template: 'base/legacy/tda/useradd.erb'
    mode  : '0600'
    readonly: false
  '/etc/rc3.d/S97configure_TDA_puppetstyle':
    ensure: 'absent'
    readonly: false
  '/etc/login.defs':
    template: 'base/legacy/tda/login.defs.erb'
    mode  : '0644'
    readonly: false
  '/etc/yum/pluginconf.d/subscription-manager.conf':
    template: 'base/legacy/tda/subscription-manager.conf.erb'
    mode  : '0644'
    readonly: false
  '/etc/netconfig':
    template: 'base/legacy/tda/netconfig.erb'
    mode: '0644'
    readonly: false
  '/root/.bash_profile':
    template: 'base/legacy/tda/bash_profile.erb'
    mode: '0644'
    readonly: false
  '/etc/sysctl.d/sysctl.conf':
    template: 'base/legacy/sysctl/sysctl.conf.erb'
    readonly: false

