#!/bin/bash

  while (( "$#" ))
  do case $1 in
       -f|--file) shift && file="$1"  ;;
     esac
     shift
  done

  if [[ -z $file ]]
  then echo "... Please provide full path to file with -f or --file"
       exit 1
  fi 

  if [[ ! -f $file ]]
  then echo "... File: \"$file\" not found.  Bailing"
       exit 1
  fi   

  parent='/etc/puppetlabs/code/ucm'
  workdir="${parent}/cache"

  echo ""
  echo "Summary for log $file"
  echo "`date`"
  echo ""
  sleep 1
  echo "Did not response to Salt: `grep 'did not respond' $file | wc -l`"
  grep 'did not respond' $file > ${file}.badhosts
  echo "Wrote bad hosts to \"${file}.badhosts\" "  
  
  
