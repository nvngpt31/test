---

#############################################
### TST/DEV HIERA YAML CONFIGURATION FILE ###
#############################################

:backends:
  - yaml
  - http

# HOST IP FOR OPENPT01 TST FOREMAN NODE
:http:
  :host: 10.6.107.112 
  :port: 5984
  :output: json
  :failure: graceful
  :paths:
    - /configuration/%{fqdn}
    - /configuration/%{environment}
    - /configuration/common
    - /storagedata/%{fqdn}
    - /vcs/%{fqdn}

:hierarchy:
# Low level
# Scope = Node, application, platform specific
  - %{clientcert}
  - "data/%{product}/%{clientcert}"
  - "data/%{product}/%{env}/%{child}"
  - "data/%{product}/%{envloc}"
  - "data/%{product}/%{env}"
  - "data/%{product}/%{building}"
  - "data/%{product}/%{centrify_domain}"
  - "data/%{product}/%{majorenv}_${child}"
  - "data/%{product}/%{majorenv}"
  - "data/%{product}/%{child}"
  - "data/%{product}/main"
  - "data/%{product}"

  - "system/filesystems/%{fskey}"
  - "system/sysctl/%{syskey}"
  - "system/%{syskey}"

  - "applications/%{appinst}/%{appinst}"
  - "applications/%{appinst}/%{appenv}"

  - "applications/%{instance_name}/mw_envs/%{mw_env}"
  - "applications/%{instance_name}/properties"
  - "applications/%{instance_name}"

  - "applications/%{mw_instance_name}/mw_envs/%{mw_env}"
  - "applications/%{mw_instance_name}/properties"
  - "applications/%{mw_instance_name}"

  - "deploy/applications/%{deploykey}"
  - "vcs/%{role}"
  - "vcs/global"

  # Development Hierarchy for multi instance 
  - "data/%{datafor}/properties"
  - "data/%{datafor}/tdaenv/%{envloc}"

# Mid to high level
# Scope of infrastructure
  - "tdaenv/%{asscli}/%{building}/%{env}/global"
  - "tdaenv/%{asscli}/%{building}/%{env}"
  - "tdaenv/%{asscli}/%{building}/global"
  - "tdaenv/%{asscli}/%{building}"
  - "tdaenv/%{envloc}"
  - "tdaenv/%{env}"
  - "datacenter/%{building}" 

# High Level
# Scope of Puppet environment and global
  - %{environment}
  - "databases/oracle"
  - "databases/postgresql"
  - common
  - global
  - defaults

:yaml:
# datadir is empty here, so hiera uses its defaults:
# - /var/lib/hiera on *nix
# - %CommonAppData%\PuppetLabs\hiera\var on Windows
# When specifying a datadir, make sure the directory exists.
  :datadir: /etc/puppet/environments/%{environment}/hieradata
