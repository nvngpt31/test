#!/bin/bash

 while (( "$#" ))
  do case $1 in
       -s|--server) shift && server="$1"  ;;
     esac
     shift
  done

  if [[ -z $server ]]
  then echo "... Please provide FQDN server name with -s or --server"
       exit 1
  fi 

  domain="echo $server | awk -F '.' '{print $2}'"
  if [[ -z $server ]] 
  then echo "... Please provide server FQDN with -s or --server" 
       exit 1
  fi 
  
  cmdbhost='prdctlvmaninv01.associatesys.local'
  port='3000'
  hostapiquery='api/v1/reports/computer_systems?TADDM_FQDN'
  url="http://${cmdbhost}:${port}/${hostapiquery}\=${server}"

  # curl -X GET -H 'Content-Type: application/json' "http://prdctlvmaninv01.associatesys.local:3000/api/v1/reports/computer_systems?TADDM_FQDN=prdtxlvptpmcf01" | python -m json.tool
  # curl -s -X GET -H 'Content-Type: application/json' $url | python -m json.tool
  # curl -X GET -H 'Content-Type: application/json' http://prdctlvmaninv01.associatesys.local:3000/api/v1/reports/computer_systems?TADDM_FQDN=prdctlvptpmcf01.clientsys.local | python -m json.tool
  curl -s -X GET -H 'Content-Type: application/json' http://${cmdbhost}:${port}/${hostapiquery}\=${server} | python -m json.tool


