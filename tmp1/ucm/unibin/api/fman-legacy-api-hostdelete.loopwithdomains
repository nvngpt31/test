#!/bin/bash

  while (( "$#" )); do
    case $1 in
      -s|--server)  shift && name="$1"      ;;
    esac
    shift
  done

  if [[ -z $name ]] ; then 
    echo $line
    echo "ERROR: Must include the name option with argument to run this script -s <SERVER FQDN>" 
    echo ""
    echo $line
    echo ""
    exit 1
  fi 

  server=$name
  opts='-s -k'
  host="foreman.associatesys.local"
  url="https://${host}/api/v2"
  url_h="${url}/hosts"
  url_h_name="${url}/hosts/${name}"
  user='crashoverride'
  pw='admin'
  h_type='Content-Type:application/json'
  h_accept='Accept:application/json'

  domains='
    clientsys.local
    clientaux.local
    associatesys.local
    associateaux.local
    iteclientsys.local
    npeclientaux.local
    pteassociatesys.local
    npeassociateaux.local'

  for domain in $domains
  do fqdn="${name}.${domain}"
     url_h_node="${url}/hosts/${fqdn}"
     echo "==============================================================================="
     echo "... Attempting to delete \"${fqdn}\" "
     echo "" 
     curl -s -k -u "${user}:${pw}" -H "Accept:  version=2, application/json" -H  "Content-Type: application/json" -X DELETE $url_h_node | python -m json.tool >/dev/null 2>&1
     echo "" 
  done 

