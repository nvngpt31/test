2018-08-23 14:03:23,635 p=6174 u=student |  ERROR! Syntax Error while loading YAML.


The error appears to have been in '/home/student/troubleshooting/samba.yml': line 8, column 30, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

    install_state: installed
    random_var: This is colon: test
                             ^ here

2018-08-23 14:04:49,538 p=6211 u=student |  ERROR! Syntax Error while loading YAML.


The error appears to have been in '/home/student/troubleshooting/samba.yml': line 43, column 4, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:


   - name: deliver samba config
   ^ here

2018-08-23 14:06:37,760 p=6241 u=student |  ERROR! Syntax Error while loading YAML.


The error appears to have been in '/home/student/troubleshooting/samba.yml': line 14, column 15, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

      name: samba
      state: {{ install_state }}
              ^ here
We could be wrong, but this one looks like it might be an issue with
missing quotes.  Always quote template expression brackets when they
start a value. For instance:

    with_items:
      - {{ foo }}

Should be written as:

    with_items:
      - "{{ foo }}"

2018-08-23 14:07:31,900 p=6262 u=student |  playbook: samba.yml
2018-08-23 14:07:46,002 p=6271 u=student |  PLAY [Install a samba server] *********************************************************************************
2018-08-23 14:07:46,147 p=6271 u=student |  TASK [Gathering Facts] ****************************************************************************************
2018-08-23 14:07:47,081 p=6271 u=student |  fatal: [servera.lab.exammple.com]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: ssh: Could not resolve hostname servera.lab.exammple.com: Name or service not known\r\n", "unreachable": true}
2018-08-23 14:07:47,088 p=6271 u=student |  	to retry, use: --limit @/home/student/troubleshooting/samba.retry

2018-08-23 14:07:47,088 p=6271 u=student |  PLAY RECAP ****************************************************************************************************
2018-08-23 14:07:47,088 p=6271 u=student |  servera.lab.exammple.com   : ok=0    changed=0    unreachable=1    failed=0   
2018-08-23 14:09:05,693 p=6312 u=student |  Using /home/student/troubleshooting/ansible.cfg as config file
2018-08-23 14:09:05,855 p=6312 u=student |  Loading callback plugin default of type stdout, v2.0 from /usr/lib/python2.7/site-packages/ansible/plugins/callback/__init__.pyc
2018-08-23 14:09:05,966 p=6312 u=student |  PLAYBOOK: samba.yml *******************************************************************************************
2018-08-23 14:09:05,967 p=6312 u=student |  1 plays in samba.yml
2018-08-23 14:09:06,011 p=6312 u=student |  PLAY [Install a samba server] *********************************************************************************
2018-08-23 14:09:06,169 p=6312 u=student |  TASK [Gathering Facts] ****************************************************************************************
2018-08-23 14:09:06,525 p=6312 u=student |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/system/setup.py
2018-08-23 14:09:06,607 p=6312 u=student |  fatal: [servera.lab.exammple.com]: UNREACHABLE! => {
    "changed": false, 
    "msg": "Failed to connect to the host via ssh: OpenSSH_6.6.1, OpenSSL 1.0.1e-fips 11 Feb 2013\r\ndebug1: Reading configuration data /home/student/.ssh/config\r\ndebug1: /home/student/.ssh/config line 1: Applying options for *\r\ndebug1: Reading configuration data /etc/ssh/ssh_config\r\ndebug1: /etc/ssh/ssh_config line 56: Applying options for *\r\ndebug1: auto-mux: Trying existing master\r\ndebug1: Control socket \"/home/student/.ansible/cp/d4775f48c9\" does not exist\r\nssh: Could not resolve hostname servera.lab.exammple.com: Name or service not known\r\n", 
    "unreachable": true
}
2018-08-23 14:09:06,623 p=6312 u=student |  	to retry, use: --limit @/home/student/troubleshooting/samba.retry

2018-08-23 14:09:06,624 p=6312 u=student |  PLAY RECAP ****************************************************************************************************
2018-08-23 14:09:06,624 p=6312 u=student |  servera.lab.exammple.com   : ok=0    changed=0    unreachable=1    failed=0   
2018-08-23 14:10:07,336 p=6367 u=student |  PLAY [Install a samba server] *********************************************************************************
2018-08-23 14:10:07,484 p=6367 u=student |  TASK [Gathering Facts] ****************************************************************************************
2018-08-23 14:10:09,662 p=6367 u=student |  ok: [servera.lab.example.com]
2018-08-23 14:10:09,670 p=6367 u=student |  TASK [install samba] ******************************************************************************************
2018-08-23 14:10:17,408 p=6367 u=student |  changed: [servera.lab.example.com]
2018-08-23 14:10:17,414 p=6367 u=student |  TASK [install firewalld] **************************************************************************************
2018-08-23 14:10:18,781 p=6367 u=student |  ok: [servera.lab.example.com]
2018-08-23 14:10:18,791 p=6367 u=student |  TASK [debug install_state variable] ***************************************************************************
2018-08-23 14:10:18,872 p=6367 u=student |  ok: [servera.lab.example.com] => {
    "msg": "The state for the samba service is installed"
}
2018-08-23 14:10:18,884 p=6367 u=student |  TASK [start samba] ********************************************************************************************
2018-08-23 14:10:20,597 p=6367 u=student |  changed: [servera.lab.example.com]
2018-08-23 14:10:20,606 p=6367 u=student |  TASK [start firewalld] ****************************************************************************************
2018-08-23 14:10:21,713 p=6367 u=student |  ok: [servera.lab.example.com]
2018-08-23 14:10:21,722 p=6367 u=student |  TASK [configure firewall for samba] ***************************************************************************
2018-08-23 14:10:23,380 p=6367 u=student |  changed: [servera.lab.example.com]
2018-08-23 14:10:23,391 p=6367 u=student |  TASK [deliver samba config] ***********************************************************************************
2018-08-23 14:10:23,473 p=6367 u=student |  fatal: [servera.lab.example.com]: FAILED! => {"changed": false, "failed": true, "msg": "Unable to find 'samba.j2' in expected paths."}
2018-08-23 14:10:23,480 p=6367 u=student |  	to retry, use: --limit @/home/student/troubleshooting/samba.retry

2018-08-23 14:10:23,480 p=6367 u=student |  PLAY RECAP ****************************************************************************************************
2018-08-23 14:10:23,480 p=6367 u=student |  servera.lab.example.com    : ok=7    changed=3    unreachable=0    failed=1   
2018-08-23 14:12:06,216 p=6506 u=student |  PLAY [Install a samba server] *********************************************************************************
2018-08-23 14:12:06,361 p=6506 u=student |  TASK [Gathering Facts] ****************************************************************************************
2018-08-23 14:12:08,583 p=6506 u=student |  ok: [servera.lab.example.com]
2018-08-23 14:12:08,592 p=6506 u=student |  TASK [install samba] ******************************************************************************************
2018-08-23 14:12:10,161 p=6506 u=student |  ok: [servera.lab.example.com]
2018-08-23 14:12:10,171 p=6506 u=student |  TASK [install firewalld] **************************************************************************************
2018-08-23 14:12:11,503 p=6506 u=student |  ok: [servera.lab.example.com]
2018-08-23 14:12:11,513 p=6506 u=student |  TASK [debug install_state variable] ***************************************************************************
2018-08-23 14:12:11,600 p=6506 u=student |  ok: [servera.lab.example.com] => {
    "msg": "The state for the samba service is installed"
}
2018-08-23 14:12:11,613 p=6506 u=student |  TASK [start samba] ********************************************************************************************
2018-08-23 14:12:12,868 p=6506 u=student |  ok: [servera.lab.example.com]
2018-08-23 14:12:12,877 p=6506 u=student |  TASK [start firewalld] ****************************************************************************************
2018-08-23 14:12:13,934 p=6506 u=student |  ok: [servera.lab.example.com]
2018-08-23 14:12:13,943 p=6506 u=student |  TASK [configure firewall for samba] ***************************************************************************
2018-08-23 14:12:15,520 p=6506 u=student |  ok: [servera.lab.example.com]
2018-08-23 14:12:15,528 p=6506 u=student |  TASK [deliver samba config] ***********************************************************************************
2018-08-23 14:12:18,863 p=6506 u=student |  changed: [servera.lab.example.com]
2018-08-23 14:12:18,868 p=6506 u=student |  PLAY RECAP ****************************************************************************************************
2018-08-23 14:12:18,869 p=6506 u=student |  servera.lab.example.com    : ok=8    changed=1    unreachable=0    failed=0   
2018-08-23 14:12:39,651 p=6604 u=student |  PLAY [Install a samba server] *********************************************************************************
2018-08-23 14:12:41,668 p=6604 u=student |  Perform task: TASK: Gathering Facts (N)o/(y)es/(c)ontinue: ****************************************************
2018-08-23 14:12:41,672 p=6604 u=student |  TASK [Gathering Facts] ****************************************************************************************
2018-08-23 14:12:43,408 p=6604 u=student |  ok: [servera.lab.example.com]
2018-08-23 14:12:43,849 p=6604 u=student |  Perform task: TASK: install samba (N)o/(y)es/(c)ontinue: ******************************************************
2018-08-23 14:12:43,857 p=6604 u=student |  TASK [install samba] ******************************************************************************************
2018-08-23 14:12:45,462 p=6604 u=student |  ok: [servera.lab.example.com]
2018-08-23 14:12:45,464 p=6604 u=student |  Perform task: TASK: install firewalld (N)o/(y)es/(c)ontinue: **************************************************
2018-08-23 14:12:45,471 p=6604 u=student |  TASK [install firewalld] **************************************************************************************
2018-08-23 14:12:46,834 p=6604 u=student |  ok: [servera.lab.example.com]
2018-08-23 14:12:46,838 p=6604 u=student |  Perform task: TASK: debug install_state variable (N)o/(y)es/(c)ontinue: ***************************************
2018-08-23 14:12:46,846 p=6604 u=student |  TASK [debug install_state variable] ***************************************************************************
2018-08-23 14:12:46,927 p=6604 u=student |  ok: [servera.lab.example.com] => {
    "msg": "The state for the samba service is installed"
}
2018-08-23 14:12:47,925 p=6604 u=student |  Perform task: TASK: start samba (N)o/(y)es/(c)ontinue: ********************************************************
2018-08-23 14:12:47,934 p=6604 u=student |  TASK [start samba] ********************************************************************************************
2018-08-23 14:12:49,165 p=6604 u=student |  ok: [servera.lab.example.com]
2018-08-23 14:12:50,074 p=6604 u=student |  Perform task: TASK: start firewalld (N)o/(y)es/(c)ontinue: ****************************************************
2018-08-23 14:12:50,082 p=6604 u=student |  TASK [start firewalld] ****************************************************************************************
2018-08-23 14:12:51,146 p=6604 u=student |  ok: [servera.lab.example.com]
2018-08-23 14:12:52,042 p=6604 u=student |  Perform task: TASK: configure firewall for samba (N)o/(y)es/(c)ontinue: ***************************************
2018-08-23 14:12:52,051 p=6604 u=student |  TASK [configure firewall for samba] ***************************************************************************
2018-08-23 14:12:53,584 p=6604 u=student |  ok: [servera.lab.example.com]
2018-08-23 14:12:54,685 p=6604 u=student |  Perform task: TASK: deliver samba config (N)o/(y)es/(c)ontinue: ***********************************************
2018-08-23 14:12:54,693 p=6604 u=student |  TASK [deliver samba config] ***********************************************************************************
2018-08-23 14:12:57,883 p=6604 u=student |  ok: [servera.lab.example.com]
2018-08-23 14:12:57,887 p=6604 u=student |  PLAY RECAP ****************************************************************************************************
2018-08-23 14:12:57,888 p=6604 u=student |  servera.lab.example.com    : ok=8    changed=0    unreachable=0    failed=0   
2018-08-23 14:35:16,324 p=7024 u=student |  PLAY [create mail relay servers] ******************************************************************************
2018-08-23 14:35:16,489 p=7024 u=student |  TASK [Gathering Facts] ****************************************************************************************
2018-08-23 14:35:18,752 p=7024 u=student |  ok: [servera.lab.example.com]
2018-08-23 14:35:18,763 p=7024 u=student |  TASK [install postfix package] ********************************************************************************
2018-08-23 14:35:20,504 p=7024 u=student |  changed: [servera.lab.example.com]
2018-08-23 14:35:20,514 p=7024 u=student |  TASK [install mail config files] ******************************************************************************
2018-08-23 14:35:22,802 p=7024 u=student |  changed: [servera.lab.example.com]
2018-08-23 14:35:22,808 p=7024 u=student |  TASK [check main.cf file] *************************************************************************************
2018-08-23 14:35:23,843 p=7024 u=student |  ok: [servera.lab.example.com]
2018-08-23 14:35:23,852 p=7024 u=student |  TASK [verify main.cf file exists] *****************************************************************************
2018-08-23 14:35:23,938 p=7024 u=student |  ok: [servera.lab.example.com] => {
    "msg": "The main.cf file exists"
}
2018-08-23 14:35:23,949 p=7024 u=student |  TASK [start and enable mail services] *************************************************************************
2018-08-23 14:35:25,230 p=7024 u=student |  changed: [servera.lab.example.com]
2018-08-23 14:35:25,240 p=7024 u=student |  TASK [check for always_bcc] ***********************************************************************************
2018-08-23 14:35:26,428 p=7024 u=student |  skipping: [servera.lab.example.com]
2018-08-23 14:35:26,437 p=7024 u=student |  TASK [email notification of always_bcc config] ****************************************************************
2018-08-23 14:35:26,508 p=7024 u=student |  fatal: [servera.lab.example.com]: FAILED! => {"failed": true, "msg": "The conditional check 'bcc_state.stdout != 'always_bcc ='' failed. The error was: error while evaluating conditional (bcc_state.stdout != 'always_bcc ='): 'dict object' has no attribute 'stdout'\n\nThe error appears to have been in '/home/student/troubleshooting/mailrelay.yml': line 42, column 7, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n    - name: email notification of always_bcc config\n      ^ here\n"}
2018-08-23 14:35:26,510 p=7024 u=student |  RUNNING HANDLER [restart postfix] *****************************************************************************
2018-08-23 14:35:26,523 p=7024 u=student |  	to retry, use: --limit @/home/student/troubleshooting/mailrelay.retry

2018-08-23 14:35:26,524 p=7024 u=student |  PLAY RECAP ****************************************************************************************************
2018-08-23 14:35:26,524 p=7024 u=student |  servera.lab.example.com    : ok=6    changed=3    unreachable=0    failed=1   
2018-08-23 14:36:23,608 p=7108 u=student |  servera.lab.example.com | FAILED | rc=1 >>
head: cannot open ‘/etc/postfix/main.cf’ for reading: No such file or directory

2018-08-23 14:36:51,329 p=7137 u=student |  PLAY [create mail relay servers] ******************************************************************************
2018-08-23 14:36:51,471 p=7137 u=student |  TASK [Gathering Facts] ****************************************************************************************
2018-08-23 14:36:53,314 p=7137 u=student |  ok: [servera.lab.example.com]
2018-08-23 14:36:53,322 p=7137 u=student |  TASK [install postfix package] ********************************************************************************
2018-08-23 14:37:00,448 p=7137 u=student |  changed: [servera.lab.example.com]
2018-08-23 14:37:00,455 p=7137 u=student |  TASK [install mail config files] ******************************************************************************
2018-08-23 14:37:03,935 p=7137 u=student |  changed: [servera.lab.example.com]
2018-08-23 14:37:03,941 p=7137 u=student |  TASK [check main.cf file] *************************************************************************************
2018-08-23 14:37:05,006 p=7137 u=student |  ok: [servera.lab.example.com]
2018-08-23 14:37:05,016 p=7137 u=student |  TASK [verify main.cf file exists] *****************************************************************************
2018-08-23 14:37:05,100 p=7137 u=student |  ok: [servera.lab.example.com] => {
    "msg": "The main.cf file exists"
}
2018-08-23 14:37:05,112 p=7137 u=student |  TASK [start and enable mail services] *************************************************************************
2018-08-23 14:37:07,567 p=7137 u=student |  changed: [servera.lab.example.com]
2018-08-23 14:37:07,577 p=7137 u=student |  TASK [check for always_bcc] ***********************************************************************************
2018-08-23 14:37:08,829 p=7137 u=student |  changed: [servera.lab.example.com]
2018-08-23 14:37:08,838 p=7137 u=student |  TASK [email notification of always_bcc config] ****************************************************************
2018-08-23 14:37:08,909 p=7137 u=student |  skipping: [servera.lab.example.com]
2018-08-23 14:37:08,912 p=7137 u=student |  RUNNING HANDLER [restart postfix] *****************************************************************************
2018-08-23 14:37:11,253 p=7137 u=student |  changed: [servera.lab.example.com]
2018-08-23 14:37:11,258 p=7137 u=student |  PLAY RECAP ****************************************************************************************************
2018-08-23 14:37:11,259 p=7137 u=student |  servera.lab.example.com    : ok=8    changed=5    unreachable=0    failed=0   
2018-08-23 14:37:28,931 p=7224 u=student |  servera.lab.example.com | SUCCESS | rc=0 >>
# Ansible managed
#
# Global Postfix configuration file. This file lists only a subset
# of all parameters. For the syntax, and for a complete parameter
# list, see the postconf(5) manual page (command: "man 5 postconf").
#
# For common configuration examples, see BASIC_CONFIGURATION_README
# and STANDARD_CONFIGURATION_README. To find these documents, use
# the command "postconf html_directory readme_directory", or go to
# http://www.postfix.org/.

2018-08-23 14:39:41,270 p=7289 u=student |  PLAY [create mail relay servers] ******************************************************************************
2018-08-23 14:39:41,418 p=7289 u=student |  TASK [Gathering Facts] ****************************************************************************************
2018-08-23 14:39:43,732 p=7289 u=student |  ok: [servera.lab.example.com]
2018-08-23 14:39:43,740 p=7289 u=student |  TASK [install postfix package] ********************************************************************************
2018-08-23 14:39:45,341 p=7289 u=student |  ok: [servera.lab.example.com]
2018-08-23 14:39:45,351 p=7289 u=student |  TASK [install mail config files] ******************************************************************************
2018-08-23 14:39:48,589 p=7289 u=student |  ok: [servera.lab.example.com]
2018-08-23 14:39:48,599 p=7289 u=student |  TASK [check main.cf file] *************************************************************************************
2018-08-23 14:39:49,673 p=7289 u=student |  ok: [servera.lab.example.com]
2018-08-23 14:39:49,685 p=7289 u=student |  TASK [verify main.cf file exists] *****************************************************************************
2018-08-23 14:39:49,765 p=7289 u=student |  ok: [servera.lab.example.com] => {
    "msg": "The main.cf file exists"
}
2018-08-23 14:39:49,776 p=7289 u=student |  TASK [start and enable mail services] *************************************************************************
2018-08-23 14:39:51,019 p=7289 u=student |  ok: [servera.lab.example.com]
2018-08-23 14:39:51,024 p=7289 u=student |  TASK [postfix firewalld config] *******************************************************************************
2018-08-23 14:39:52,659 p=7289 u=student |  changed: [servera.lab.example.com]
2018-08-23 14:39:52,668 p=7289 u=student |  TASK [check for always_bcc] ***********************************************************************************
2018-08-23 14:39:53,840 p=7289 u=student |  changed: [servera.lab.example.com]
2018-08-23 14:39:53,849 p=7289 u=student |  TASK [email notification of always_bcc config] ****************************************************************
2018-08-23 14:39:53,920 p=7289 u=student |  skipping: [servera.lab.example.com]
2018-08-23 14:39:53,936 p=7289 u=student |  PLAY RECAP ****************************************************************************************************
2018-08-23 14:39:53,937 p=7289 u=student |  servera.lab.example.com    : ok=8    changed=2    unreachable=0    failed=0   
2018-08-23 14:40:14,299 p=7399 u=student |  servera.lab.example.com | SUCCESS | rc=0 >>
dhcpv6-client ssh samba smtp

