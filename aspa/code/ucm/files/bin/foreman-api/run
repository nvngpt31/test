#!/bin/bash

  line='================================================================================='
  node=$1
  class='test'
  opts='-s -k'
  host="ucmnui.associatesys.local"
  # url="https://${host}/api/v2/salt/run"
  url="https://${host}/salt/highstate"
  user='ucmadmin'
  pw='unity2018'
  h_type='Content-Type:application/json'
  h_accept='Accept:application/json'

  # =====================================================================================
  fn_run () {
    name=$1 
    curl $opts -u "${user}:${pw}" -H "$h_type" -H "$h_accept" -X POST -d "{\"id\":\"$name\"}" $url 
    # curl $opts -u "${user}:${pw}" -H "$h_type" -H "$h_accept" -X POST -d "{\"name\":\"$name\"}" $url 
  }

  echo ""
  echo $line
  echo ""
  fn_run $node | python -m json.tool
  echo ""
  echo $line
  echo ""
